---
import Accordion from "./Accordion.astro";

const faqs = [
  {
    question: "Apakah Perlu Melakukan Reservasi Terlebih Dahulu?",
    answer: "Ya, kami menyarankan reservasi agar pelayanan lebih optimal."
  },
  {
    question: "Apakah Perawatan Gigi Terasa Sakit?",
    answer: "Kami menggunakan teknik dan alat modern untuk meminimalkan rasa tidak nyaman."
  },
  {
    question: "Apakah Melayani Pasien Anak-Anak?",
    answer: "Tentu, kami menyediakan perawatan khusus anak dengan pendekatan ramah."
  }
];
---

<section
  id="FAQ"
  data-faq
  class="mt-24 px-6 md:px-12 lg:px-20 flex flex-col md:flex-row justify-center items-start gap-12"
>
  <div class="space-y-6 max-w-md text-center md:text-left">
    <p id='faq-tagline' class="text-[#24B9CC] text-sm font-medium bg-[#e7fcff] border border-[#24B9CC] px-4 py-2 w-fit mx-auto md:mx-0 rounded-full">
      FAQ
    </p>
    <h1 id="faq-title" class="font-black text-3xl sm:text-4xl">
      Pertanyaan yang Sering Diajukan
    </h1>
  </div>

  <div class="w-full max-w-xl space-y-4">
    {faqs.map(faq => (
     <div data-faq-item class="opacity-0">
        <Accordion question={faq.question} answer={faq.answer} />
     </div>
    ))}
  </div>
</section>
<script>
  import { animate } from 'animejs';

  const target = document.querySelector('[data-faq]');
  const items = document.querySelectorAll('[data-faq-item]');

  if (target) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;

          ['#faq-tagline', '#faq-title'].forEach((selector, index) => {
            animate(selector, {
              translateY: [50, 0],
              opacity: [0, 1],
              duration: 1000,
              delay: index * 200,
              easing: 'easeOutQuint'
            })
          });

          items.forEach((el, index) => {
            animate(el, {
              opacity: [0, 1],
              translateY: [50, 0],
              delay: index * 300,
              duration: 800,
              easing: 'easeOutQuad'
            });
          })

          observer.unobserve(entry.target);
        });
      },
      { threshold: 0.2 }
    );

    observer.observe(target);
  }
</script>