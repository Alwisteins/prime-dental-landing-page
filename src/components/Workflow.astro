---
const workflows = [
  {
    title: "Buat Janji Temu",
    description: "Pilih Jadwal Yang Sesuai Dengan Waktu Anda."
  },
  {
    title: "Pemeriksaan & Konsultasi",
    description: "Dokter Akan Menjelaskan Kondisi Dan Pilihan Perawatan."
  },
  {
    title: "Prosedur Medis",
    description: "Perawatan Dilakukan Dengan Aman Dan Nyaman."
  },
  {
    title: "Kontrol & Edukasi",
    description: "Panduan Perawatan Lanjutan Untuk Hasil Optimal."
  }
]
---

<section
  id="workflow"
  data-workflow
  class="mt-24 px-6 md:px-12 lg:px-20 flex flex-col justify-center items-center gap-12"
>
  <div class="max-w-xl space-y-6 flex flex-col items-center text-center">
    <p id="workflow-tagline" class="text-[#24B9CC] text-sm font-medium bg-[#e7fcff] border border-[#24B9CC] px-4 py-2 w-fit rounded-full">
      Cara Kerja Kami
    </p>
    <h1 id="workflow-title" class="font-black text-3xl sm:text-4xl">
      Proses Perawatan Mudah
    </h1>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-7xl">
    {workflows.map((step, idx) => (
      <div data-step class="p-6 rounded-xl bg-[#EBFDFF] border border-[#24B9CC] min-h-55">
        <h3 class="font-semibold text-3xl text-[#24B9CC]">
          {idx + 1}
        </h3>
        <h3 class="mt-3 mb-1 font-semibold text-lg">
          {step.title}
        </h3>
        <p class="text-sm text-slate-600">
          {step.description}
        </p>
      </div>
    ))}
  </div>
</section>
<script>
  import { animate } from 'animejs';

  const target = document.querySelector('[data-workflow]');
  const items = document.querySelectorAll('[data-step]');

  if (target) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;

          ['#workflow-tagline', '#workflow-title'].forEach((selector, index) => {
            animate(selector, {
              translateY: [50, 0],
              opacity: [0, 1],
              duration: 1000,
              delay: index * 200,
              easing: 'easeOutQuint'
            })
          });

          items.forEach((el, index) => {
            animate(el, {
              opacity: [0, 1],
              translateY: [50, 0],
              delay: index * 300,
              duration: 800,
              easing: 'easeOutQuad'
            });
          })

          observer.unobserve(entry.target);
        });
      },
      { threshold: 0.2 }
    );

    observer.observe(target);
  }
</script>