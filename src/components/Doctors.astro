---
import Image from "astro/components/Image.astro";
import DrBudiImg from "../assets/images/dr-budi.png";
import DrLinaImg from "../assets/images/dr-lina.png";
import DrAndiImg from "../assets/images/dr-andi.png";
import DrSitiImg from "../assets/images/dr-siti.png";

const doctors = [
  {
    name: "Drg. Budi Santoso, Sp.Pros",
    specialty: "Spesialis Prostodonsia",
    experience: "10 Tahun Pengalaman",
    services: [
      "Gigi Palsu",
      "Mahkota & Jembatan Gigi",
      "Rehabilitasi Gigi"
    ],
    schedule: "Minggu, Senin, Jumat | 13.00 - 19.00",
    image: DrBudiImg
  },
  {
    name: "Drg. Lina Kurnia, Sp.Ort",
    specialty: "Spesialis Ortodonti",
    experience: "7 Tahun Pengalaman",
    services: [
      "Kawat Gigi",
      "Aligner Bening",
      "Koreksi Perataan Gigi"
    ],
    schedule: "Rabu - Sabtu | 11.00 - 17.00",
    image: DrLinaImg
  },
  {
    name: "Drg. Andi Pratama",
    specialty: "Dokter Gigi Umum",
    experience: "5 Tahun Pengalaman",
    services: [
      "Pemeriksaan Gigi",
      "Scaling Gigi",
      "Tambal Gigi",
      "Perawatan Gigi Anak"
    ],
    schedule: "Senin - Jumat | 09.00 - 16.00",
    image: DrAndiImg
  },
  {
    name: "Drg. Siti Rahmawati",
    specialty: "Dokter Gigi Estetika",
    experience: "3 Tahun Pengalaman",
    services: [
      "Veneer",
      "Pemutihan Gigi",
      "Desain Senyum"
    ],
    schedule: "Selasa - Sabtu | 10.00 - 18.00",
    image: DrSitiImg
  }
]
---

<section
  id="doktor"
  data-doctors
  class="mt-24 px-6 md:px-12 lg:px-20 flex flex-col justify-center items-center gap-12"
>
  <div class="max-w-xl space-y-6 flex flex-col items-center text-center">
    <p id="doctor-tagline" class="text-[#24B9CC] text-sm font-medium bg-[#e7fcff] border border-[#24B9CC] px-4 py-2 w-fit rounded-full">
      Doktor Kami
    </p>
    <h1 id="doctor-title" class="font-black text-3xl sm:text-4xl">
      Ditangani oleh Dokter Gigi Profesional
    </h1>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 w-full max-w-7xl">
    {doctors.map((doctor) => (
      <div data-doctor class="flex flex-col sm:flex-row sm:items-center gap-6 p-6 rounded-xl bg-[#24B9CC]">
        <div class="flex justify-center">
          <Image
            src={doctor.image}
            alt={doctor.name}
            width={120}
            height={120}
            class="rounded-lg h-fit"
          />
        </div>

        <div class="text-white space-y-1">
          <p class="text-sm text-slate-100">
            {doctor.specialty}
          </p>
          <h3 class="text-lg font-semibold">
            {doctor.name}
          </h3>
          <p class="text-xs text-slate-100">
            {doctor.experience}
          </p>

          <div class="flex flex-wrap gap-2 pt-2">
            {doctor.services.map((service) => (
              <span class="text-xs px-2 py-1 bg-white text-[#24B9CC] rounded-full">
                {service}
              </span>
            ))}
          </div>

          <p class="text-sm text-slate-100 pt-2">
            {doctor.schedule}
          </p>
        </div>
      </div>
    ))}
  </div>
</section>
<script>
  import { animate } from 'animejs';

  const target = document.querySelector('[data-doctors]');
  const items = document.querySelectorAll('[data-doctor]');

  if (target) {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;

          ['#doctor-tagline', '#doctor-title'].forEach((selector, index) => {
            animate(selector, {
              translateY: [50, 0],
              opacity: [0, 1],
              duration: 1000,
              delay: index * 200,
              easing: 'easeOutQuint'
            })
          });

          items.forEach((el, index) => {
            animate(el, {
              opacity: [0, 1],
              translateY: [50, 0],
              delay: index * 300,
              duration: 1000,
              easing: 'easeOutQuad'
            });
          })

          observer.unobserve(entry.target);
        });
      },
      { threshold: 0.2 }
    );

    observer.observe(target);
  }
</script>
